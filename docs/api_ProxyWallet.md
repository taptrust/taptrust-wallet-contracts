---
id: ProxyWallet
title: ProxyWallet
---

<div class="contract-doc"><div class="contract"><h2 class="contract-header"><span class="contract-kind">contract</span> ProxyWallet</h2><p class="description">Proof of concept implementation of a Solidity proxy wallet. Unlike most authentication in Ethereum contracts, the address of the transaction sender is arbitrary, but it includes a signed message that can be authenticated as being from either the account owner or a dApp for whom the account owner has created a session with permissions.</p><div class="source">Source: <a href="https://github.com/taptrust/taptrust-wallet-contracts//blob/v0.0.1/contracts/ProxyWallet.sol" target="_blank">ProxyWallet.sol</a></div><div class="author">Author: Tap Trust</div></div><div class="index"><h2>Index</h2><ul><li><a href="ProxyWallet.html#AdministratorAdded">AdministratorAdded</a></li><li><a href="ProxyWallet.html#ContractDestroyed">ContractDestroyed</a></li><li><a href="ProxyWallet.html#GasRefundEvent">GasRefundEvent</a></li><li><a href="ProxyWallet.html#PublicKeySet">PublicKeySet</a></li><li><a href="ProxyWallet.html#RecoveredAddress">RecoveredAddress</a></li><li><a href="ProxyWallet.html#SessionEvent">SessionEvent</a></li><li><a href="ProxyWallet.html#SignedMessage">SignedMessage</a></li><li><a href="ProxyWallet.html#Transfer">Transfer</a></li><li><a href="ProxyWallet.html#UsernameSet">UsernameSet</a></li><li><a href="ProxyWallet.html#addAdministrator">addAdministrator</a></li><li><a href="ProxyWallet.html#calculateGasCost">calculateGasCost</a></li><li><a href="ProxyWallet.html#checkIfAccountHasExactBalance">checkIfAccountHasExactBalance</a></li><li><a href="ProxyWallet.html#checkIfAddedUser">checkIfAddedUser</a></li><li><a href="ProxyWallet.html#checkIfNotAddedUser">checkIfNotAddedUser</a></li><li><a href="ProxyWallet.html#checkSessionState">checkSessionState</a></li><li><a href="ProxyWallet.html#closeSession">closeSession</a></li><li><a href="ProxyWallet.html#executeOneTimeTransaction">executeOneTimeTransaction</a></li><li><a href="ProxyWallet.html#">fallback</a></li><li><a href="ProxyWallet.html#getAdministrator">getAdministrator</a></li><li><a href="ProxyWallet.html#getAdministratorsCount">getAdministratorsCount</a></li><li><a href="ProxyWallet.html#getAllAdministrators">getAllAdministrators</a></li><li><a href="ProxyWallet.html#getBalance">getBalance</a></li><li><a href="ProxyWallet.html#getCurrentSpentGas">getCurrentSpentGas</a></li><li><a href="ProxyWallet.html#getOtherSessionData">getOtherSessionData</a></li><li><a href="ProxyWallet.html#getPublicKey">getPublicKey</a></li><li><a href="ProxyWallet.html#getPublicKeyFromSession">getPublicKeyFromSession</a></li><li><a href="ProxyWallet.html#getSignature">getSignature</a></li><li><a href="ProxyWallet.html#getUsername">getUsername</a></li><li><a href="ProxyWallet.html#hasFunds">hasFunds</a></li><li><a href="ProxyWallet.html#isAuthorizedAdmin">isAuthorizedAdmin</a></li><li><a href="ProxyWallet.html#isNotOneTimeTransaction">isNotOneTimeTransaction</a></li><li><a href="ProxyWallet.html#isOneTimeTransaction">isOneTimeTransaction</a></li><li><a href="ProxyWallet.html#isOwner">isOwner</a></li><li><a href="ProxyWallet.html#isSignedMessage">isSignedMessage</a></li><li><a href="ProxyWallet.html#kill">kill</a></li><li><a href="ProxyWallet.html#onlyValidAdministrator">onlyValidAdministrator</a></li><li><a href="ProxyWallet.html#onlyValidAdministrators">onlyValidAdministrators</a></li><li><a href="ProxyWallet.html#onlyValidPublicKey">onlyValidPublicKey</a></li><li><a href="ProxyWallet.html#onlyValidUsername">onlyValidUsername</a></li><li><a href="ProxyWallet.html#recoverAddress">recoverAddress</a></li><li><a href="ProxyWallet.html#refundGasCosts">refundGasCosts</a></li><li><a href="ProxyWallet.html#setNewUser">setNewUser</a></li><li><a href="ProxyWallet.html#setNewUserPublicKey">setNewUserPublicKey</a></li><li><a href="ProxyWallet.html#setNewUsername">setNewUsername</a></li><li><a href="ProxyWallet.html#signMessage">signMessage</a></li><li><a href="ProxyWallet.html#startSession">startSession</a></li><li><a href="ProxyWallet.html#transfer">transfer</a></li></ul></div><div class="reference"><h2>Reference</h2><div class="events"><h3>Events</h3><ul><li><div class="item event"><span id="AdministratorAdded" class="anchor-marker"></span><h4 class="name">AdministratorAdded</h4><div class="body"><code class="signature">event <strong>AdministratorAdded</strong><span>(address admin) </span></code><hr/><div class="description"><p>Fired when administrator is added.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>admin</code> - address</div></dd></dl></div></div></li><li><div class="item event"><span id="ContractDestroyed" class="anchor-marker"></span><h4 class="name">ContractDestroyed</h4><div class="body"><code class="signature">event <strong>ContractDestroyed</strong><span>(address contractOwner) </span></code><hr/><div class="description"><p>Contract destroyed event.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>contractOwner</code> - address</div></dd></dl></div></div></li><li><div class="item event"><span id="GasRefundEvent" class="anchor-marker"></span><h4 class="name">GasRefundEvent</h4><div class="body"><code class="signature">event <strong>GasRefundEvent</strong><span>(address from, address to, uint256 gasCost) </span></code><hr/><div class="description"><p>Gas refund event.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>from</code> - address</div><div><code>to</code> - address</div><div><code>gasCost</code> - uint256</div></dd></dl></div></div></li><li><div class="item event"><span id="PublicKeySet" class="anchor-marker"></span><h4 class="name">PublicKeySet</h4><div class="body"><code class="signature">event <strong>PublicKeySet</strong><span>(address from, string publicKey) </span></code><hr/><div class="description"><p>Fired when public key is set.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>from</code> - address</div><div><code>publicKey</code> - string</div></dd></dl></div></div></li><li><div class="item event"><span id="RecoveredAddress" class="anchor-marker"></span><h4 class="name">RecoveredAddress</h4><div class="body"><code class="signature">event <strong>RecoveredAddress</strong><span>(bytes32 messageHash, bytes sig, address recoveredAddress) </span></code><hr/><div class="description"><p>Recovered address event.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>messageHash</code> - bytes32</div><div><code>sig</code> - bytes</div><div><code>recoveredAddress</code> - address</div></dd></dl></div></div></li><li><div class="item event"><span id="SessionEvent" class="anchor-marker"></span><h4 class="name">SessionEvent</h4><div class="body"><code class="signature">event <strong>SessionEvent</strong><span>(address deviceId, string dataId, SessionState state) </span></code><hr/><div class="description"><p>Fired when session data is added/changed.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>deviceId</code> - address</div><div><code>dataId</code> - string</div><div><code>state</code> - SessionState</div></dd></dl></div></div></li><li><div class="item event"><span id="SignedMessage" class="anchor-marker"></span><h4 class="name">SignedMessage</h4><div class="body"><code class="signature">event <strong>SignedMessage</strong><span>(bytes32 messageHash, bytes32 signedMessage) </span></code><hr/><div class="description"><p>Signed message event.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>messageHash</code> - bytes32</div><div><code>signedMessage</code> - bytes32</div></dd></dl></div></div></li><li><div class="item event"><span id="Transfer" class="anchor-marker"></span><h4 class="name">Transfer</h4><div class="body"><code class="signature">event <strong>Transfer</strong><span>(address from, address to, uint256 value) </span></code><hr/><div class="description"><p>Transfer event.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>from</code> - address</div><div><code>to</code> - address</div><div><code>value</code> - uint256</div></dd></dl></div></div></li><li><div class="item event"><span id="UsernameSet" class="anchor-marker"></span><h4 class="name">UsernameSet</h4><div class="body"><code class="signature">event <strong>UsernameSet</strong><span>(address from, string username) </span></code><hr/><div class="description"><p>Fired when username is set.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>from</code> - address</div><div><code>username</code> - string</div></dd></dl></div></div></li></ul></div><div class="modifiers"><h3>Modifiers</h3><ul><li><div class="item modifier"><span id="calculateGasCost" class="anchor-marker"></span><h4 class="name">calculateGasCost</h4><div class="body"><code class="signature">modifier <strong>calculateGasCost</strong><span>() </span></code><hr/><div class="description"><p>Calculate used gas. Calculation of the used gas which is used for every function, that executes some kind of interaction with Smart Contract and adds on calculation amount of gas used so far. Using usedGas variable to store total amount of gas used and gasCost variable to store total amount of gas value, used so far (including the current function being run).</p></div></div></div></li><li><div class="item modifier"><span id="checkIfAddedUser" class="anchor-marker"></span><h4 class="name">checkIfAddedUser</h4><div class="body"><code class="signature">modifier <strong>checkIfAddedUser</strong><span>(string dataId) </span></code><hr/><div class="description"><p>Check if user is already added to users mapping.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>dataId</code> - string Data id value.</div></dd></dl></div></div></li><li><div class="item modifier"><span id="checkIfNotAddedUser" class="anchor-marker"></span><h4 class="name">checkIfNotAddedUser</h4><div class="body"><code class="signature">modifier <strong>checkIfNotAddedUser</strong><span>(string dataId) </span></code><hr/><div class="description"><p>Check if user is not already added to users mapping.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>dataId</code> - string Data id value.</div></dd></dl></div></div></li><li><div class="item modifier"><span id="hasFunds" class="anchor-marker"></span><h4 class="name">hasFunds</h4><div class="body"><code class="signature">modifier <strong>hasFunds</strong><span>(address _address) </span></code><hr/><div class="description"><p>Checks if account has funds.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_address</code> - address Address of the account which balance needs to be checked.</div></dd></dl></div></div></li><li><div class="item modifier"><span id="isAuthorizedAdmin" class="anchor-marker"></span><h4 class="name">isAuthorizedAdmin</h4><div class="body"><code class="signature">modifier <strong>isAuthorizedAdmin</strong><span>(address _admin) </span></code><hr/><div class="description"><p>Checks if the admin is correct and belongs to list of administrators.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_admin</code> - address Administrator address.</div></dd></dl></div></div></li><li><div class="item modifier"><span id="isNotOneTimeTransaction" class="anchor-marker"></span><h4 class="name">isNotOneTimeTransaction</h4><div class="body"><code class="signature">modifier <strong>isNotOneTimeTransaction</strong><span>(TransactionType _transactionType) </span></code><hr/><div class="description"><p>Checks if its not one time transaction.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_transactionType</code> - TransactionType Type of transaction</div></dd></dl></div></div></li><li><div class="item modifier"><span id="isOneTimeTransaction" class="anchor-marker"></span><h4 class="name">isOneTimeTransaction</h4><div class="body"><code class="signature">modifier <strong>isOneTimeTransaction</strong><span>(TransactionType _transactionType) </span></code><hr/><div class="description"><p>Checks if its one time transaction.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_transactionType</code> - TransactionType Type of transaction</div></dd></dl></div></div></li><li><div class="item modifier"><span id="isOwner" class="anchor-marker"></span><h4 class="name">isOwner</h4><div class="body"><code class="signature">modifier <strong>isOwner</strong><span>() </span></code><hr/><div class="description"><p>Requires a valid owner of the contract.</p></div></div></div></li><li><div class="item modifier"><span id="onlyValidAdministrator" class="anchor-marker"></span><h4 class="name">onlyValidAdministrator</h4><div class="body"><code class="signature">modifier <strong>onlyValidAdministrator</strong><span>(address _admin) </span></code><hr/><div class="description"><p>Requires that a valid administrator address was provided.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_admin</code> - address Administrator address.</div></dd></dl></div></div></li><li><div class="item modifier"><span id="onlyValidAdministrators" class="anchor-marker"></span><h4 class="name">onlyValidAdministrators</h4><div class="body"><code class="signature">modifier <strong>onlyValidAdministrators</strong><span>(address[] _administrators) </span></code><hr/><div class="description"><p>Requires that a valid administrator list was provided.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_administrators</code> - address[] List of administrators.</div></dd></dl></div></div></li><li><div class="item modifier"><span id="onlyValidPublicKey" class="anchor-marker"></span><h4 class="name">onlyValidPublicKey</h4><div class="body"><code class="signature">modifier <strong>onlyValidPublicKey</strong><span>(string _publicKey) </span></code><hr/><div class="description"><p>Requires that a valid public key of the user was provided.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_publicKey</code> - string Public key of the user.</div></dd></dl></div></div></li><li><div class="item modifier"><span id="onlyValidUsername" class="anchor-marker"></span><h4 class="name">onlyValidUsername</h4><div class="body"><code class="signature">modifier <strong>onlyValidUsername</strong><span>(string _username) </span></code><hr/><div class="description"><p>Requires that a valid username of the user was provided.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_username</code> - string Username of the user.</div></dd></dl></div></div></li></ul></div><div class="functions"><h3>Functions</h3><ul><li><div class="item function"><span id="addAdministrator" class="anchor-marker"></span><h4 class="name">addAdministrator</h4><div class="body"><code class="signature">function <strong>addAdministrator</strong><span>(address _admin) </span><span>public </span></code><hr/><div class="description"><p>Add a new administrator to the contract.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#isOwner">isOwner </a><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_admin</code> - address The address of the administrator to add.</div></dd></dl></div></div></li><li><div class="item function"><span id="checkIfAccountHasExactBalance" class="anchor-marker"></span><h4 class="name">checkIfAccountHasExactBalance</h4><div class="body"><code class="signature">function <strong>checkIfAccountHasExactBalance</strong><span>(address _address, uint256 _balance) </span><span>public </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Check if the account has exact same balance like give balance.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_address</code> - address Account address.</div><div><code>_balance</code> - uint256 Give balance to compare with.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>True if the account balance has the exact same balance like give balance.</dd></dl></div></div></li><li><div class="item function"><span id="checkSessionState" class="anchor-marker"></span><h4 class="name">checkSessionState</h4><div class="body"><code class="signature">function <strong>checkSessionState</strong><span>(string dataId) </span><span>public </span><span>returns  (SessionState) </span></code><hr/><div class="description"><p>Check if session is active or closed.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>dataId</code> - string Data id value.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>SessionState State of the session.</dd></dl></div></div></li><li><div class="item function"><span id="closeSession" class="anchor-marker"></span><h4 class="name">closeSession</h4><div class="body"><code class="signature">function <strong>closeSession</strong><span>(string dataId) </span><span>public </span></code><hr/><div class="description"><p>Close session.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#checkIfAddedUser">checkIfAddedUser </a><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>dataId</code> - string Data id value.</div></dd></dl></div></div></li><li><div class="item function"><span id="executeOneTimeTransaction" class="anchor-marker"></span><h4 class="name">executeOneTimeTransaction</h4><div class="body"><code class="signature">function <strong>executeOneTimeTransaction</strong><span>(address _from, address _to, uint256 _value) </span><span>public </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Check if its one time transaction and execute transfer.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#isOneTimeTransaction">isOneTimeTransaction </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_from</code> - address The address from which to transfer.</div><div><code>_to</code> - address The address to transfer to.</div><div><code>_value</code> - uint256 The amount to be transferred.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool True if the function was executed successfully.</dd></dl></div></div></li><li><div class="item function"><span id="fallback" class="anchor-marker"></span><h4 class="name">fallback</h4><div class="body"><code class="signature">function <strong></strong><span>(address[] _administrators) </span><span>public </span></code><hr/><div class="description"><p>Proxy Wallet constructor.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#onlyValidAdministrators">onlyValidAdministrators </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_administrators</code> - address[] List of administrator addresses.</div></dd></dl></div></div></li><li><div class="item function"><span id="getAdministrator" class="anchor-marker"></span><h4 class="name">getAdministrator</h4><div class="body"><code class="signature">function <strong>getAdministrator</strong><span>(uint256 _id) </span><span>public </span><span>returns  (address) </span></code><hr/><div class="description"><p>Get all administrator addresses.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#onlyValidAdministrators">onlyValidAdministrators </a><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - uint256 Id of the administrator.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>address Administrators address.</dd></dl></div></div></li><li><div class="item function"><span id="getAdministratorsCount" class="anchor-marker"></span><h4 class="name">getAdministratorsCount</h4><div class="body"><code class="signature">function <strong>getAdministratorsCount</strong><span>() </span><span>public </span><span>view </span><span>returns  (uint) </span></code><hr/><div class="description"><p>Get all administrators length.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>uint Number of all administrators.</dd></dl></div></div></li><li><div class="item function"><span id="getAllAdministrators" class="anchor-marker"></span><h4 class="name">getAllAdministrators</h4><div class="body"><code class="signature">function <strong>getAllAdministrators</strong><span>() </span><span>public </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>Get all administrator addresses.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-return">Returns:</span></dt><dd>address[] List of all administrators.</dd></dl></div></div></li><li><div class="item function"><span id="getBalance" class="anchor-marker"></span><h4 class="name">getBalance</h4><div class="body"><code class="signature">function <strong>getBalance</strong><span>(address _address) </span><span>public </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>Get balance of the account.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_address</code> - address Address of account which balanced needs to be returned.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint256 Balance of the account.</dd></dl></div></div></li><li><div class="item function"><span id="getCurrentSpentGas" class="anchor-marker"></span><h4 class="name">getCurrentSpentGas</h4><div class="body"><code class="signature">function <strong>getCurrentSpentGas</strong><span>() </span><span>public </span><span>view </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>Get current total gas cost.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>uint256 Current gas cost.</dd></dl></div></div></li><li><div class="item function"><span id="getOtherSessionData" class="anchor-marker"></span><h4 class="name">getOtherSessionData</h4><div class="body"><code class="signature">function <strong>getOtherSessionData</strong><span>(string dataId) </span><span>public </span><span>returns  (address, string, bytes32, uint256, uint256, SessionState, TransactionType) </span></code><hr/><div class="description"><p>Get other session data from session data.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#checkIfAddedUser">checkIfAddedUser </a><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>dataId</code> - string Data id value used as index to find data from session.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>address, string, bytes32, uint256, uint256, SessionState, TransactionType Device id, subject, hashed data, start time, duration value, user data, session state and transaction type from session.</dd></dl></div></div></li><li><div class="item function"><span id="getPublicKey" class="anchor-marker"></span><h4 class="name">getPublicKey</h4><div class="body"><code class="signature">function <strong>getPublicKey</strong><span>(string dataId) </span><span>public </span><span>returns  (string) </span></code><hr/><div class="description"><p>Get user stored public key of given address.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#checkIfAddedUser">checkIfAddedUser </a><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>dataId</code> - string Data id value used as index to find data from list of users.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>string User stored public key.</dd></dl></div></div></li><li><div class="item function"><span id="getPublicKeyFromSession" class="anchor-marker"></span><h4 class="name">getPublicKeyFromSession</h4><div class="body"><code class="signature">function <strong>getPublicKeyFromSession</strong><span>(string dataId) </span><span>public </span><span>returns  (bytes32, bytes32) </span></code><hr/><div class="description"><p>Get public key value from session data.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>dataId</code> - string Data id value used as index to find data from session.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bytes32, bytes32 First and second key from session data.</dd></dl></div></div></li><li><div class="item function"><span id="getSignature" class="anchor-marker"></span><h4 class="name">getSignature</h4><div class="body"><code class="signature">function <strong>getSignature</strong><span>(string dataId) </span><span>public </span><span>returns  (bytes32, bytes32, uint8) </span></code><hr/><div class="description"><p>Get signature value from session data.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#checkIfAddedUser">checkIfAddedUser </a><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>dataId</code> - string Data id value used as index to find data from session.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bytes32, bytes32, uint8 Signature data.</dd></dl></div></div></li><li><div class="item function"><span id="getUsername" class="anchor-marker"></span><h4 class="name">getUsername</h4><div class="body"><code class="signature">function <strong>getUsername</strong><span>(string dataId) </span><span>public </span><span>returns  (string) </span></code><hr/><div class="description"><p>Get user stored username of given address.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#checkIfAddedUser">checkIfAddedUser </a><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>dataId</code> - string Data id value used as index to find data from list of users.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>string User stored username.</dd></dl></div></div></li><li><div class="item function"><span id="isSignedMessage" class="anchor-marker"></span><h4 class="name">isSignedMessage</h4><div class="body"><code class="signature">function <strong>isSignedMessage</strong><span>(address _address, bytes32 _messageHash, bytes _sig) </span><span>internal </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Check if the given address signed the message.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_address</code> - address Address which signed the message.</div><div><code>_messageHash</code> - bytes32 Hashed message that needs to be checked.</div><div><code>_sig</code> - bytes Signature message.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool True if the given address signed the message.</dd></dl></div></div></li><li><div class="item function"><span id="kill" class="anchor-marker"></span><h4 class="name">kill</h4><div class="body"><code class="signature">function <strong>kill</strong><span>() </span><span>public </span></code><hr/><div class="description"><p>Destroy the contract.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#isOwner">isOwner </a></dd></dl></div></div></li><li><div class="item function"><span id="recoverAddress" class="anchor-marker"></span><h4 class="name">recoverAddress</h4><div class="body"><code class="signature">function <strong>recoverAddress</strong><span>(bytes32 _messageHash, bytes _sig) </span><span>public </span><span>returns  (address) </span></code><hr/><div class="description"><p>Recover address which signed the message.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_messageHash</code> - bytes32 Hashed message that needs to be checked.</div><div><code>_sig</code> - bytes Signature hashed value.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>address Returning address which signed the message.</dd></dl></div></div></li><li><div class="item function"><span id="refundGasCosts" class="anchor-marker"></span><h4 class="name">refundGasCosts</h4><div class="body"><code class="signature">function <strong>refundGasCosts</strong><span>(address _admin) </span><span>public </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Refund total cast costs to authorized admin address.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#isAuthorizedAdmin">isAuthorizedAdmin </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_admin</code> - address The address of admin.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool True if the function was executed successfully.</dd></dl></div></div></li><li><div class="item function"><span id="setNewUser" class="anchor-marker"></span><h4 class="name">setNewUser</h4><div class="body"><code class="signature">function <strong>setNewUser</strong><span>(string dataId, string _username, string _publicKey) </span><span>public </span></code><hr/><div class="description"><p>Set new user.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#checkIfNotAddedUser">checkIfNotAddedUser </a><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>dataId</code> - Data id value.</div><div><code>_username</code> - string Username of the user.</div><div><code>_publicKey</code> - string Public key of the user.</div></dd></dl></div></div></li><li><div class="item function"><span id="setNewUserPublicKey" class="anchor-marker"></span><h4 class="name">setNewUserPublicKey</h4><div class="body"><code class="signature">function <strong>setNewUserPublicKey</strong><span>(string dataId, string _publicKey) </span><span>public </span></code><hr/><div class="description"><p>Set user/app public key.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#onlyValidPublicKey">onlyValidPublicKey </a><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>dataId</code> - Data id value.</div><div><code>_publicKey</code> - string Public key of the user.</div></dd></dl></div></div></li><li><div class="item function"><span id="setNewUsername" class="anchor-marker"></span><h4 class="name">setNewUsername</h4><div class="body"><code class="signature">function <strong>setNewUsername</strong><span>(string dataId, string _username) </span><span>public </span></code><hr/><div class="description"><p>Set username of the user/app.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#onlyValidUsername">onlyValidUsername </a><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>dataId</code> - Data id value.</div><div><code>_username</code> - string Username of the user.</div></dd></dl></div></div></li><li><div class="item function"><span id="signMessage" class="anchor-marker"></span><h4 class="name">signMessage</h4><div class="body"><code class="signature">function <strong>signMessage</strong><span>(bytes32 _messageHash) </span><span>public </span><span>returns  (bytes32) </span></code><hr/><div class="description"><p>Sign message address which signed the message.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_messageHash</code> - bytes32 Hashed message that needs to be signed.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bytes32 Encoded message.</dd></dl></div></div></li><li><div class="item function"><span id="startSession" class="anchor-marker"></span><h4 class="name">startSession</h4><div class="body"><code class="signature">function <strong>startSession</strong><span>(string dataId, address deviceId, bytes32 first, bytes32 second, bytes32 hashed, string subject, bytes32 r, bytes32 s, uint8 v, uint256 startTime, uint256 duration) </span><span>public </span></code><hr/><div class="description"><p>Add session data and start session.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#checkIfAddedUser">checkIfAddedUser </a><a href="ProxyWallet.html#isNotOneTimeTransaction">isNotOneTimeTransaction </a><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>dataId</code> - string Data id value.</div><div><code>deviceId</code> - string Device id value.</div><div><code>first</code> - bytes32 First key.</div><div><code>second</code> - bytes32 Second key.</div><div><code>hashed</code> - bytes32 Hashed value.</div><div><code>subject</code> - string Description/subject value.</div><div><code>r</code> - bytes32 Signature r param.</div><div><code>s</code> - bytes32 Signature s param.</div><div><code>v</code> - uint8 Signature v param.</div><div><code>startTime</code> - uint256 Session start time value.</div><div><code>duration</code> - uint256 Session length value.</div></dd></dl></div></div></li><li><div class="item function"><span id="transfer" class="anchor-marker"></span><h4 class="name">transfer</h4><div class="body"><code class="signature">function <strong>transfer</strong><span>(address _from, address _to, uint256 _value) </span><span>public </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Transfer funds for a specified address.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="ProxyWallet.html#calculateGasCost">calculateGasCost </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_from</code> - address The address from which to transfer.</div><div><code>_to</code> - address The address to transfer to.</div><div><code>_value</code> - uint256 The amount to be transferred.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool True if the function was executed successfully.</dd></dl></div></div></li></ul></div></div></div>
